# There are a lot more options can be configured.
# Please refer to https://prometheus.io/docs/alerting/configuration/#configuration-file

# The root node of the routing tree.
route:
  receiver: ingestion-service
  group_by: ['alertname', 'instance']
  group_wait: 5s
  group_interval: 1m
  repeat_interval: 5m

# Inhibition rules allow to mute a set of alerts given that another alert is
# firing.
# We use this to mute any warning-level notifications if the same alert is
# already critical.
inhibit_rules:
  - source_match:
      severity: 'critical'
    target_match:
      severity: 'warning'
    # Apply inhibition if the alertname is the same.
    equal: ['alertname', 'cluster', 'service']


# A list of notification receivers.
receivers:
  - name: 'ingestion-service'
    webhook_configs:
      - send_resolved: false
        url: http://ingestion-service:3000/alerts
        # If the ingestion-service is NOT running as a Docker container, but simply on your host machine,
        # then on macOS the host.docker.internal address routes the communication from inside a container
        # towards the host machine.
        # url: http://host.docker.internal:3000/alerts

